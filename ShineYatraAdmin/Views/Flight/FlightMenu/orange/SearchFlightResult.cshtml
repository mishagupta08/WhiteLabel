@using System.Globalization
@model ShineYatraAdmin.Entity.SearchPageViewModel
@using ShineYatraAdmin.Properties

@{
    ViewBag.Title = "SearchFlightResult";
    Layout = "~/Views/Shared/orange/Layout.cshtml";
    int i = 0, count = 0;
    var query = string.Empty;
}
<style>
    .booking-item {
        border: 1px solid #e6e6e6;
        margin: 13px 0px;
        padding: 0px;
    }

        .booking-item td {
            border: none;
        }

    .display-none {
        display: none;
    }

    .booking-item-flight-details .booking-item-departure, .booking-item-flight-details .booking-item-arrival {
        width: auto;
    }

    .booking-item-container {
        padding: 15px;
        margin: 10px;
        margin-bottom: 10px;
        /*background: pink;*/
    }

    table.dataTable thead .sorting,
    table.dataTable thead .sorting_asc,
    table.dataTable thead .sorting_desc {
        background: none;
    }

    .dataTables_filter, .dataTables_info {
        display: none;
    }

    .ui-datepicker .ui-datepicker-header {
        background-color: white;
        border: 0px;
    }

    .ui-state-highlight, .ui-widget-content .ui-state-highlight, .ui-widget-header .ui-state-highlight {
        background-color: #ed8323 !important;
        color: white !important;
    }

    .ui-autocomplete {
        z-index: 100;
    }

    .tab {
        display: inline-block;
        padding: 8px;
        background-color: rgba(0,0,0,0.06);
        color: #ed8323;
    }

    .active-tab {
        background-color: #ed8323;
        color: white;
    }

    .form-group.form-group-lg {
        margin-bottom: 8px;
    }

    .ui-menu {
        background-color: #ed8323;
        width: 335.2px !important;
        color: white;
    }

    .mt50 {
        margin-top: 10px !important;
    }
</style>
<link href="~/plugins/bower_components/jquery-ui/jquery-ui.min.css" rel="stylesheet" />

<div class="container">
    @{
        var recordCount = Model.arrayOfSearchedFlights.Origindestinationoption == null ? "0" : Model.arrayOfSearchedFlights.Origindestinationoption.Count().ToString();
        var child = string.Empty;
        if (Model.flightSearch.ChildPax > 0)
        {
            child += " ," + @Model.flightSearch.AdultPax + " Child ";
        }
        if (Model.flightSearch.InfantPax > 0)
        {
            child += " ,and " + @Model.flightSearch.InfantPax + " Infant";
        }

        query = recordCount + " Flights from " + @Model.flightSearch.Origin + " to " + @Model.flightSearch.Destination + " on " + @Model.flightSearch.DepartDate + " for " + @Model.flightSearch.AdultPax + " adult " + child;
    }
    <div class="mfp-with-anim mfp-hide mfp-dialog mfp-search-dialog" id="search-dialog">
        @Html.Partial("~/Views/Flight/FlightMenu/orange/_SearchFlightPartialView.cshtml", Model.flightSearch)
    </div>
    <h3 class="booking-title">@query<small><a class="popup-text" href="#search-dialog" data-effect="mfp-zoom-out">Change search</a></small></h3>
    <div class="row">
        <div class="col-md-3">
            <form action="SearchFlight" method="post" id="searchFlightForm1" @*onsubmit="return SubmitFlightSearch();"*@>
                <div class="tabbable">
                    <div class="tab-content">
                        <div class="tab-pane fade in active" id="flight-search-1">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group form-group-lg form-group-icon-left">
                                        <div class="tab active-tab" data-value="ONE" name="tripmode1">One Way</div><div class="tab" name="tripmode1" data-value="ROUND">Round Trip</div>
                                        @*@Html.HiddenFor(m => m.flightSearch.Mode, new { @id = "Mode1", @name= "Mode" })*@
                                        <input id="Mode1" name="Mode" type="hidden" value=@Model.flightSearch.Mode>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group form-group-lg form-group-icon-left">
                                        <label class="control-label">Flight Category</label>
                                        <div class="radio-list">
                                            <label style="display:inline-block;">
                                                @*@Html.RadioButtonFor(model => model.flightSearch.FlightType, (Resources.Domestic), new { @style = "display:inline-block;", @checked = "checked" })*@
                                                <input checked="checked" id="flightSearch_FlightType" name="FlightType" style="display:inline-block;" type="radio" value=@Resources.Domestic>
                                                @Html.Label(Resources.Domestic, new { @style = "display:inline-block;" })
                                            </label>
                                            <label style="display:inline-block;margin-left: 10%;margin-top: 9px;">
                                                @*@Html.RadioButtonFor(model => model.flightSearch.FlightType, Resources.International, new { @style = "display:inline-block;" })*@
                                                <input id="flightSearch_FlightType" name="FlightType" style="display:inline-block;" type="radio" value=@Resources.International>
                                                @Html.Label(Resources.International, new { @style = "display:inline-block;" })
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group form-group-lg form-group-icon-left">
                                        <i class="fa fa-map-marker input-icon"></i>
                                        <label>Class</label>
                                        <select class="form-control" id="flightClass" name="Preferredclass" required="0">
                                            <option selected="selected" value="E">Economy</option>
                                        </select>

                                        @*@Html.DropDownListFor(m => m.flightSearch.Preferredclass, new SelectList(Model.flightSearch.FlightClass, "Id", "Value"), new { @required = "0", id = "flightClass", @class = "form-control" })*@
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group form-group-lg form-group-icon-left">
                                        <i class="fa fa-map-marker input-icon"></i>
                                        <label>From</label>
                                        @*@Html.TextBoxFor(m => m.flightSearch.Origin, new { @required = "", @id = "flightOrigin1", @class = "form-control", @placeholder = Resources.Origin })*@
                                        <input class="form-control ui-autocomplete-input" id="flightOrigin1" name="Origin" placeholder="Origin" required="" type="text" value=@Model.flightSearch.Origin>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group form-group-lg form-group-icon-left">
                                        <i class="fa fa-map-marker input-icon"></i>
                                        <label>To</label>
                                        <input class="form-control ui-autocomplete-input" id="flightDestination1" name="Destination" placeholder="Destination" required="" type="text" value=@Model.flightSearch.Destination>
                                        @*@Html.TextBoxFor(m => m.flightSearch.Destination, new { @required = "", @id = "flightDestination1", @class = "form-control", @placeholder = Resources.Destination })*@
                                    </div>
                                </div>
                            </div>

                            <div class="input-daterange" data-date-format="dd-M-yy">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group form-group-lg form-group-icon-left">
                                            <i class="fa fa-calendar input-icon input-icon-highlight"></i>
                                            <label>Departing</label>
                                            @*@Html.TextBoxFor(m => m.flightSearch.DepartDate, new { @id = "dateinput1", @required = "", @class = "datepicker form-control", @placeholder = "dd-mmm-yyyy" })*@
                                            <input class="datepicker form-control" id="dateinput1" name="DepartDate" placeholder="dd-mmm-yyyy" required="" type="text" value=@Model.flightSearch.DepartDate>
                                        </div>
                                    </div>
                                    <div class="col-md-6" id="ReturnDateField1" style="display:none;">
                                        <div class="form-group form-group-lg form-group-icon-left">
                                            <i class="fa fa-calendar input-icon input-icon-highlight"></i>
                                            <label>Returning</label>
                                            <input class="form-control datepicker" id="returnDate1" name="ReturnDate" placeholder="dd-mmm-yyyy" type="text" value=@Model.flightSearch.ReturnDate required="">
                                            @*@Html.TextBoxFor(m => m.flightSearch.ReturnDate, new { @id = "returnDate1", @class = "form-control datepicker", @placeholder = "dd-mmm-yyyy" })*@
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group form-group-lg form-group-select-plus">
                                            <label>Adult 12+ yrs </label>
                                            <div class="btn-group btn-group-select-num" data-toggle="buttons">
                                                @*@Html.TextBoxFor(m => m.flightSearch.AdultPax, new { @type = "number", @id = "adult1", @required = "", @class = "form-control", @min = "1", @Value = "1" })*@
                                                <input value=@Model.flightSearch.AdultPax class="form-control" data-val="true" data-val-number="The field AdultPax must be a number." data-val-required="The AdultPax field is required." id="adult1" min="1" name="AdultPax" required="" type="number">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group form-group-lg form-group-select-plus">
                                            <label>Child 2-11 yrs :</label>
                                            <div class="btn-group btn-group-select-num" data-toggle="buttons">
                                                @*@Html.TextBoxFor(m => m.flightSearch.ChildPax, new { @type = "number", @id = "ChildPax1", @class = "form-control", @min = "0" })*@
                                                <input class="form-control" data-val="true" data-val-number="The field ChildPax must be a number." data-val-required="The ChildPax field is required." id="ChildPax1" min="0" name="ChildPax" type="number" value=@Model.flightSearch.ChildPax>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4">
                                        <div class="form-group form-group-lg form-group-select-plus">
                                            <label>Infant 0-2 yrs :</label>
                                            <div class="btn-group btn-group-select-num" data-toggle="buttons">
                                                @*@Html.TextBoxFor(m => m.flightSearch.InfantPax, new { @type = "number", @id = "infant1", @class = "form-control", @min = "0" })*@
                                                <input class="form-control" data-val="true" data-val-number="The field InfantPax must be a number." data-val-required="The InfantPax field is required." id="infant1" min="0" name="InfantPax" type="number" value=@Model.flightSearch.InfantPax>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            @*</div>*@
                            <button class="btn btn-primary btn-lg" type="submit">Search for Flights</button>
                        </div>
                    </div>
                </div>
            </form>
            <br />
            <aside class="booking-filters text-white">
                <h3>Filter By:</h3>
                <ul class="list booking-filters-list">

                    <li>
                        <h5 class="booking-filters-title">Stops @*<small>Price from</small>*@</h5>
                        <div id="stopsCheckbox"></div>
                    </li>
                    <li>
                        <h5 class="booking-filters-title">Price </h5>
                        <label id="minprice" style="display:none;"></label>
                        <label id="maxprice" style="display:none;"></label>
                        <input type="text" id="price-slider">
                    </li>
                    <li>
                        <h5 class="booking-filters-title">Flight Class</h5>
                        <div class="checkbox">
                            <label>
                                <input class="classflight" checked="checked" name="flight_class" value="Economy" type="checkbox" />Economy
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input class="classflight" checked="checked" name="flight_class" value="Business" type="checkbox" />Business
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input class="classflight" checked="checked" name="flight_class" value="First" type="checkbox" />First
                            </label>
                        </div>
                    </li>
                    <li>
                        <h5 class="booking-filters-title">Airlines</h5>
                        <div id="AirlineNameCheckbox">
                            <label><input type="checkbox" checked name="type" class="airlinetype" value="Air India">&nbsp;Air India</label><br />
                            <label><input type="checkbox" checked name="type" class="airlinetype" value="Jet Airways">&nbsp;Jet Airways</label>
                        </div>
                    </li>
                    <li>
                        <h5 class="booking-filters-title">Departure Time</h5>
                        <div class="checkbox">
                            <label>
                                <input class="flight_shift" value="Morning" checked="checked" name="flight_shift" type="checkbox" />Morning (12:00a - 11:59a)
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input class="flight_shift" value="Noon" checked="checked" name="flight_shift" type="checkbox" />Afternoon (12:00p - 3:59p)
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input class="flight_shift" value="Evening" checked="checked" name="flight_shift" type="checkbox" />Evening (4:00p - 8:59p)
                            </label>
                        </div>
                        <div class="checkbox">
                            <label>
                                <input class="flight_shift" value="Night" checked="checked" name="flight_shift" type="checkbox" />Night (9:00p - 11:59p)
                            </label>
                        </div>
                    </li>
                </ul>
            </aside>
        </div>
        <div class="col-md-9">
            @if (Model.arrayOfSearchedFlights.Origindestinationoption == null)
            {
                <div class="col-md-12">No Flights Available</div>
            }
            else
            {
                <div class="nav-drop booking-sort">
                    <h5 class="booking-sort-title"><a href="#">Sort: <span id="sortBy"></span><i class="fa fa-angle-down"></i><i class="fa fa-angle-up"></i></a></h5>
                    <ul class="nav-drop-menu">
                        <li>
                            <a href="#" onclick="Callsort(6,'desc', 'Price')">Price</a>
                        </li>
                        <li>
                            <a href="#" onclick="Callsort(8, 'asc','Duration')">Duration</a>
                        </li>
                        <li>
                            <a href="#" onclick="Callsort(5,'asc','Stops')">Stops</a>
                        </li>
                        <li>
                            <a href="#" onclick="Callsort(10, 'asc', 'Departure')">Departure</a>
                        </li>
                        <li>
                            <a href="#" onclick="Callsort(11, 'asc', 'Arrival')">Arrival</a>
                        </li>
                    </ul>
                </div>
                <table id="flightsearchResult" class="display table" width="100%">
                    <thead>
                        <tr style="display:none;">
                            <th>Airline Name</th>
                            <th>Departure Time</th>
                            <th>Destination Arrival Time</th>
                            <th>duration</th>
                            <th>test</th>
                            <th class="display-none">stops</th>
                            <th class="display-none">price</th>
                            <th class="display-none">classtype</th>
                            <th class="display-none">duration</th>
                            <th class="display-none">hourofday</th>
                            <th class="display-none">departure</th>
                            <th class="display-none">arrival</th>
                        </tr>
                    </thead>
                    <tbody>
                        @*<ul class="booking-list">*@
                        @foreach (var flightrows in Model.arrayOfSearchedFlights.Origindestinationoption)
                        {
                            var flightrow = flightrows.FlightsDetailList.FlightsDetail.First();
                            var flightlastrow = flightrows.FlightsDetailList.FlightsDetail.Last();
                            var duration = flightlastrow.ArrivalDateTime.Subtract(flightrow.DepartureDateTime);
                            var calFare = flightrows.FareDetail.ChargeableFares.ActualBaseFare + flightrows.FareDetail.ChargeableFares.Tax;
                            var hourofday = flightrow.DepartureDateTime.TimeOfDay.Hours;
                            count = flightrows.FlightsDetailList.FlightsDetail.Count();
                            count = count - 1;
                            i = i + 1;

                            <tr class="booking-item">
                                <td class="col-md-2">
                                    @flightrow.AirLineName breakit
                                    <div class="booking-item-airline-logo">
                                        <img src=@flightrow.ImageFileName alt="Image Alternative text" title="Image Title" />
                                        <p>@flightrow.AirLineName (@flightrow.OperatingAirlineCode - @flightrow.FlightNumber)</p>
                                    </div>
                                </td>
                                <td class="col-md-2 booking-item-flight-details">

                                    <div class="booking-item-departure">
                                        <i class="fa fa-plane"></i>
                                        <h5>@flightrow.DepartureDateTime.ToString("HH:mm")</h5>
                                        <p class="booking-item-date">@flightrow.DepartureDateTime.ToString("ddd, MMM dd") </p>
                                        <p class="booking-item-destination">@flightrow.DepartureAirportCode</p>
                                    </div>

                                </td>
                                <td class="col-md-2 booking-item-flight-details">

                                    <div class="booking-item-arrival">
                                        <i class="fa fa-plane fa-flip-vertical"></i>
                                        <h5>@flightlastrow.ArrivalDateTime.ToString("HH:mm")</h5>
                                        <p class="booking-item-date">@flightlastrow.ArrivalDateTime.ToString("ddd, MMM dd") </p>
                                        <p class="booking-item-destination">@flightlastrow.ArrivalAirportCode</p>
                                    </div>

                                </td>
                                <td class="col-md-2">
                                    <div>
                                        <h5>@duration.Hours.@duration.Minutes</h5>
                                        <p name="stopCount" data-row=@i>@count stop</p>
                                    </div>
                                </td>


                                <td class="col-md-3 booking-item-container">
                                    <div>
                                        <span class="booking-item-price"> <i class="fa fa-inr" aria-hidden="true"></i> @calFare</span>
                                        <p class="booking-item-flight-class">Class: @flightrow.BookingClassFare.ClassType</p>
                                        <form method="post" action="BookFlight">
                                            <input type="hidden" value="@Model.flightSearch.AdultPax" name="AdultPax">
                                            <input type="hidden" value="@Model.flightSearch.ChildPax" name="ChildPax">
                                            <input type="hidden" value="@Model.flightSearch.InfantPax" name="InfantPax">
                                            <input type="hidden" value="@Model.flightSearch.Origin" name="Origin">
                                            <input type="hidden" value="@Model.flightSearch.DepartDate" name="DepartDate">
                                            <input type="hidden" value="@Model.flightSearch.FlightType" name="FlightType">
                                            <input type="hidden" value="@Model.flightSearch.Mode" name="Mode">
                                            <input type="hidden" value="@Model.flightSearch.Destination" name="Destination">
                                            <input type="hidden" value="@Model.flightSearch.Preferredclass" name="Preferredclass" />
                                            <input type="hidden" value="@flightrow.SubServiceId" name="SubServiceId">
                                            <input type="hidden" value="@flightrow.Id" name="Id">
                                            <input type="hidden" value="@flightrow.FlightNumber" name="FlightNumber">
                                            <input type="hidden" value="@flightrow.OperatingAirlineCode" name="OperatingAirlineCode">
                                            <input type="hidden" value="@flightrows.FareDetail.backdiscount" name="backdiscount">

                                            <input class="btn btn-primary" type="submit" value="Select">
                                        </form>
                                        @*<a class="btn btn-primary" href="flight-payment.asp">Select</a>*@
                                    </div>

                                    <div class="booking-item-details">
                                        <div class="row">
                                            <div>
                                                <h5>Flight Details</h5>
                                                @if (count == 0)
                                                {
                                                    <ul class="list">
                                                        <li>Departure :@flightrow.DepartureAirportCode</li>
                                                        <li>Arrival :@flightrow.ArrivalAirportCode</li>
                                                        <li>@flightrow.AirLineName,  @flightrow.OperatingAirlineCode - @flightrow.FlightNumber</li>
                                                        <li>@flightrow.BookingClassFare.ClassType</li>
                                                        <li>Depart @flightrow.DepartureDateTime.ToString("HH:mm") Arrive @flightrow.ArrivalDateTime.ToString("HH:mm")</li>
                                                    </ul>
                                                    <h5>Stop: @count</h5>
                                                }
                                                else
                                                {
                                                    foreach (var flight in flightrows.FlightsDetailList.FlightsDetail)
                                                    {
                                                        var time = flightlastrow.ArrivalDateTime.Subtract(flightrow.DepartureDateTime);
                                                        <ul class="list">
                                                            <li>Departure :@flight.DepartureAirportCode</li>
                                                            <li>Arrival :@flight.ArrivalAirportCode</li>
                                                            <li>@flight.AirLineName,  @flight.OperatingAirlineCode - @flight.FlightNumber</li>
                                                            <li>Class: @flight.BookingClassFare.ClassType</li>
                                                            <li>Depart @flight.DepartureDateTime.ToString("HH:mm") Arrive @flight.ArrivalDateTime.ToString("HH:mm")</li>
                                                            @*<li>Duration: @duration.Hours h @duration.Minutes m </li>*@
                                                        </ul>
                                                        <h5>Stopover: @flight.ArrivalAirportCode</h5>
                                                    }
                                                }

                                                <h5>Total trip time: @duration.Hours.@duration.Minutes</h5>
                                                <p>Fare Details</p>
                                                <div class="col-md-12">
                                                    <div style="float:left;">Base Fare</div><div style="float:right;">@flightrows.FareDetail.ChargeableFares.ActualBaseFare</div><br />
                                                    <div style="float:left;">Tax</div><div style="float:right;">@flightrows.FareDetail.ChargeableFares.Tax</div><br />
                                                    <hr />
                                                    <div style="float:left;">Total</div><div style="float:right;">@calFare</div><br />
                                                </div>
                                                <p>Flight Rules</p>
                                                <div class="col-lg-12">
                                                    @flightrow.BookingClassFare.Rule
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </td>
                                <td class="display-none">
                                    @count
                                </td>
                                <td class="display-none">
                                    @calFare
                                </td>
                                <td class="display-none">
                                    @flightrow.BookingClassFare.ClassType
                                </td>
                                <td class="display-none">
                                    @duration.Hours.@duration.Minutes
                                </td>
                                <td class="display-none">
                                    @hourofday
                                </td>
                                <td class="display-none">
                                    @flightrow.DepartureDateTime
                                </td>
                                <td class="display-none">
                                    @flightrow.ArrivalDateTime
                                </td>
                            </tr>
                        }
                    </tbody>
                    @*</ul>*@
                </table>
            }
            <p class="text-right">
                Not what you're looking for? <a class="popup-text" href="#search-dialog" data-effect="mfp-zoom-out">Try your search again</a>
            </p>
        </div>
    </div>
    <div class="gap"></div>
</div>

<script src="~/plugins/bower_components/jquery/dist/jquery.min.js"></script>
<script src="~/Script/flight.js?v=1"></script>
<script>
    $(document).ready(function () {
        $("p[name=stopCount]").click(function () {
            var rowId = $(this).attr("data-row");
            $("tr[data-name=" + rowId + "]").slideToggle("slow");
        });

        //jq("#priceRange").slider({
        //    range: true,
        //    step: 1,
        //    values: [minvalue, maxvalue],
        //    min: minvalue,
        //    max: maxvalue
        //});

        $("#price-slider").ionRangeSlider({
            min: minvalue,
            max: maxvalue,
            type: 'double',
            from: minvalue,
            to: maxvalue,
            // maxPostfix: "+",
            prettify: false,
            hasGrid: true,
            onFinish: saveResult
        });

        $("#minprice").html(minvalue);
        $("#maxprice").html(maxvalue);

        $("#Mode1").val("ONE");
        $("div[name=tripmode1]").bind("click", function () {
            $("div[name=tripmode1]").removeClass("active-tab");
            $("div[name=tripmode1]").addClass("tab");
            $(this).addClass("active-tab");
            var selectedMode = $(this).attr("data-value");
            $("#Mode1").val(selectedMode);
            displayReturnMode(selectedMode);
        });
        $("#dateinput").focusout(function () {
            $("#DepartDate").val(this.value);
        });

        $("#returnDate").focusout(function () {
            $("#ReturnDate").val(this.value);
        });
        // Date Picker
        $('#dateinput').datepicker({
            autoclose: true,
            todayHighlight: true,
            changeMonth: true,
            changeYear: true,
            dateFormat: "dd-M-yy",
            minDate: 0
        });

        $('#returnDate').datepicker({
            autoclose: true,
            todayHighlight: true,
            changeMonth: true,
            changeYear: true,
            dateFormat: "dd-M-yy",
            minDate: 0
        });

        /***On form variables***/

        $("#dateinput1").focusout(function () {
            $("#DepartDate1").val(this.value);
        });

        $("#returnDate1").focusout(function () {
            $("#ReturnDate1").val(this.value);
        });
        // Date Picker
        $('#dateinput1').datepicker({
            autoclose: true,
            todayHighlight: true,
            changeMonth: true,
            changeYear: true,
            dateFormat: "dd-M-yy",
            minDate: 0
        });

        $('#returnDate1').datepicker({
            autoclose: true,
            todayHighlight: true,
            changeMonth: true,
            changeYear: true,
            dateFormat: "dd-M-yy",
            minDate: 0
        });

        /*****END*****/

        var taskIdValue = $("#boardTaskId").val();

        $('#flightOrigin1').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "AssessorNameSearch",
                    type: "POST",
                    dataType: "json",
                    data: { Prefix: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return {
                                label: item.Id + " (" + item.Value + ")",
                                value: item.Id
                            }
                        }));
                    },
                    fail: function (error) {
                        alert(erorr);
                    }
                });
            }
        });

        $('#flightDestination1').autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "AssessorNameSearch",
                    type: "POST",
                    dataType: "json",
                    data: { Prefix: request.term },
                    success: function (data) {
                        response($.map(data, function (item) {
                            return {
                                label: item.Id + " (" + item.Value + ")",
                                value: item.Id
                            }
                        }));
                    },
                    fail: function (error) {
                        alert(erorr);
                    }
                });
            }
        });
    });

    function displayReturnMode(type) {
        if (type == "ONE") {
            $("#ReturnDateField1").hide();
            $("#returnDate1").prop('required', false);
        }
        else {
            $("#ReturnDateField1").show();
            $("#returnDate1").prop('required', true);
        }
    }

    var saveResult = function (data) {
        $("#minprice").html(data.fromNumber);
        $("#maxprice").html(data.toNumber);
        oTable.draw();
    };
</script>
