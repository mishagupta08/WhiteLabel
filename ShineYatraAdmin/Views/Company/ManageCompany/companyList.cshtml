@model ShineYatraAdmin.Entity.CompanyViewModel
@using ShineYatraAdmin.Properties


<script src="~/plugins/bower_components/sweetalert/sweetalert.min.js"></script>
<script src="~/plugins/bower_components/sweetalert/jquery.sweet-alert.custom.js"></script>

@if (Model.CompanyList != null && Model.CompanyList.Count > 0)
{
    <table class="table">
        <thead>
            <tr>
                <th role="columnheader" name="company_id">System ID </th>
                <th role="columnheader" name="company_logo">Logo</th>
                <th role="columnheader" name="company_name">Company Name</th>
                <th role="columnheader" name="company_website">Web Site</th>
                <th role="columnheader" name="utility_domain">Utility Site</th>
                <th role="columnheader" name="company_mobile">Contact No.</th>                
                <th role="columnheader" name="active_status">Active</th>
                <th class="text-nowrap">Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var company in Model.CompanyList)
            {
                <tr>
                    <td><a href="javascript:void(0)">@company.company_id</a></td>
                    <td> <img src="@company.company_logo" alt="iMac" width="80"> </td>
                    <td>@company.company_name</td>
                    <td><span class="text-muted"><i class="fa fa-cloud"></i>@company.company_website</span> </td>
                    <td><span class="text-muted"><i class="fa fa-cloud"></i>@company.utility_domain</span> </td>
                    <td>@company.contact_person_phone</td>                    
                    <td><div class="label label-table label-success">@company.active_status</div></td>
                    <td class="text-nowrap">
                        <a href="#" data-company-id="@company.company_id" name="editView" data-toggle="tooltip" title="Edit" data-original-title="Edit" class="popup-with-form">
                            <i class="fa fa-pencil text-inverse m-r-10"></i>
                        </a>
                        &nbsp;
                        <a href="#" data-toggle="tooltip" data-original-title="Close" title="Close">
                            <i class="fa fa-close text-danger sa-disable"></i>
                        </a>
                        @*&nbsp;
                        <a href="~/Company/companyCommission?companyId=@company.company_id&companyName=@company.company_name&companySettingId=@company.cmp_setting_id" data-toggle="tooltip" title="Company Commission Structure" data-original-title="Company Commission Structure">
                            <i class="fa fa-money text-inverse m-r-10"></i>
                        </a>*@
                        &nbsp;
                        <a href="#" name="company-setting" data-company-name="@company.company_name" data-company-setting-id="@company.cmp_setting_id" data-company-id="@company.company_id" data-toggle="tooltip" title="settings" data-original-title="settings" class="popup-with-form">
                            <i class="fa fa-bullseye text-inverse m-r-10"></i>
                        </a>
                        @*&nbsp;
                        <a href="#" name="add-fund" data-company-name="@company.company_name" data-company-id="@company.company_id" data-toggle="tooltip" title="Add-Funds" data-original-title="Add-Funds" class="popup-with-form">
                            <i class="fa fa-money text-inverse m-r-10"></i>
                        </a>*@
                    </td>

                </tr>
            }
        </tbody>
    </table>
}
else
{
    <div> No Company Found.</div>
}

@if (Model != null && Model.CompanyList != null && Model.CompanyList.Count() > 0)
{
    var pageSize = Convert.ToInt32(Resources.PageSize);
    var pageShowCount = 1;
    <nav aria-label="~.">
        <ul class="pagination pull-left">
            <p> Showing <span id="fromPageIndex">@Model.FromPage</span> to <span id="toPageIndex">@Model.ToPage</span> of @Model.RecordCount entries </p>
        </ul>
    </nav>

                    <nav aria-label="~.">
                        <ul class="pagination pull-right">
                            <li class="page-item">
                                <a class="page-link" id="previousPages" data-view='@Resources.ManageCompanies' tabindex="-1" href="#" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                    <span class="sr-only">Previous Pages</span>
                                </a>
                            </li>
                            @*<li class="page-item">
                                    <a class="page-link" id="previous" data-view=@Resources.ClaimListView tabindex="-1" href="#" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                </li>*@
                            @for (var i = 1; i <= Model.PagingCount; i++)
                            {
                                var className = (@i == Model.CurrentPageIndex ? "active" : string.Empty);
                                var displayClass = (@i <= pageSize ? "db" : "dn");

                                /*******Code run in case of back or refresh*****/
                                if (Model.PageSlot != 0)
                                {
                                    if (Model.PageSlot == pageShowCount)
                                    {
                                        displayClass = "db";
                                    }
                                    else
                                    {
                                        displayClass = "dn";
                                    }
                                }

                                <li class="page-item @className @displayClass" page-slot="@pageShowCount">
                                    <a class="page-link" name="page" data-view='@Resources.ManageCompanies' data-page-index=@i href="#">@i</a>
                                </li>
                                if (i % pageSize == 0)
                                {
                                    pageShowCount = pageShowCount + 1;
                                }
                            }

                            @*<li class="page-item">
                                    <a class="page-link" data-view=@Resources.ClaimListView id="next" aria-label="Next" href="#">
                                        <span aria-hidden="true">&raquo;</span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </li>*@
                            <li class="page-item">
                                <a class="page-link" id="nextPages" data-view='@Resources.ManageCompanies' aria-label="Next" href="#">
                                    <span aria-hidden="true">&raquo;</span>
                                    <span class="sr-only">Next Pages</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
}

@Html.HiddenFor(m => m.PagingCount, new { @id = "pagingCount" })
@Html.HiddenFor(m => m.PageSlot, new { @id = "pageSlot" })
@Html.HiddenFor(m => m.CurrentPageIndex, new { @id = "pageIndex" })
@Html.HiddenFor(m => m.RecordCount,new {@id= "RecordCount" })

@********end pagination code************@

